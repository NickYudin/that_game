<%= render @room %>

  <% if !@room.monster_defeated? && current_user.character.alive?%>
    <% if !@room.in_action? %>
      <% @room.monster.health = @room.monster.max_health %>
      <% @room.monster.save %>
    <% end %>
    
    <p>
      <strong>Monster:</strong>
      <%= @room.monster.name %>
      <div>
        health: <%= @room.monster.health %>
      </div>
    </p>
    <%= render class_feature_view %> 
    <% if !@room.in_action?%>
      <%= button_to [:fight], class: "btn-danger rounded shadow" do%>
        Attack!
      <% end %>
    <% elsif @room.in_action? %>
      <%= button_to [:fight], class: "btn-danger rounded shadow" do%>
        Attack!
      <% end %>
      <%= button_to [:strike], class: "btn-danger rounded shadow" do%>
        hit again
      <% end %>
      </br>
      <%= button_to [:run], class: "btn-secondary rounded shadow" do%>
        run
      <% end %>
    <% end %>
  <% elsif current_user.character.dead?%>
      <%= link_to "go home", character_path(current_user.character), class:"btn btn-dark shadow" %>
  <%else%>
      <p>
        <strong>There are no monster</strong>
      </p>
  <% end %>

<% if @room.monster_defeated? %>
  <%= button_to "Next", next_room, method: :get, class:"btn btn-dark shadow" %>
  <%= button_to [:rest], class:"btn btn-dark shadow" do%>
    Short rest
  <% end %>
<% end %>
</br>
</br>
</br>
</br>
</br>
<% if can? :manage, @room %>
  <div>
    <%= link_to "Edit this room", edit_room_path(@room) %> 

    <%= button_to "Destroy this room", @room, method: :delete %>
  </div>
  <%= link_to "Back to rooms", rooms_path %>
<% end %>
